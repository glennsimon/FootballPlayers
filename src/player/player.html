<html>
  <head> </head>
  <body>
    <div class="buttons">
      <button onclick="stand()">STAND</button>
      <button onclick="walk()">WALK</button>
      <button onclick="run()">RUN</button>
    </div>
    <div class="floor">
      <div class="field"></div>
      <div class="waist">
        <div class="torso">
          <div class="face torso__front">88</div>
          <div class="face torso__back">88</div>
          <div class="face torso__right"></div>
          <div class="face torso__left"></div>
          <div class="face torso__top"></div>
          <div class="face torso__bottom"></div>
        </div>
        <div class="leg__left">
          <div class="thigh">
            <div class="thigh__front"></div>
            <div class="thigh__back"></div>
            <div class="thigh__right"></div>
            <div class="thigh__left"></div>
            <div class="thigh__top"></div>
            <div class="thigh__bottom"></div>
          </div>
          <div class="knee">
            <div class="calf">
              <div class="calf__front"></div>
              <div class="calf__back"></div>
              <div class="calf__right"></div>
              <div class="calf__left"></div>
              <div class="calf__top"></div>
              <div class="calf__bottom"></div>
            </div>
            <div class="foot">
              <div class="foot__front"></div>
              <div class="foot__back"></div>
              <div class="foot__right"></div>
              <div class="foot__left"></div>
              <div class="foot__top"></div>
              <div class="foot__bottom"></div>
            </div>
          </div>
        </div>
        <div class="leg__right">
          <div class="thigh">
            <div class="thigh__front"></div>
            <div class="thigh__back"></div>
            <div class="thigh__right"></div>
            <div class="thigh__left"></div>
            <div class="thigh__top"></div>
            <div class="thigh__bottom"></div>
          </div>
          <div class="knee">
            <div class="calf">
              <div class="calf__front"></div>
              <div class="calf__back"></div>
              <div class="calf__right"></div>
              <div class="calf__left"></div>
              <div class="calf__top"></div>
              <div class="calf__bottom"></div>
            </div>
            <div class="foot">
              <div class="foot__front"></div>
              <div class="foot__back"></div>
              <div class="foot__right"></div>
              <div class="foot__left"></div>
              <div class="foot__top"></div>
              <div class="foot__bottom"></div>
            </div>
          </div>
        </div>
        <div class="pads">
          <div class="arm__left">
            <div class="shoulder">
              <div class="shoulder__front"></div>
              <div class="shoulder__back"></div>
              <div class="shoulder__right"></div>
              <div class="shoulder__left"></div>
              <div class="shoulder__top"></div>
              <div class="shoulder__bottom"></div>
            </div>
            <div class="upper">
              <div class="upper__front"></div>
              <div class="upper__back"></div>
              <div class="upper__right"></div>
              <div class="upper__left"></div>
              <div class="upper__top"></div>
              <div class="upper__bottom"></div>
            </div>
            <div class="elbow">
              <div class="lower">
                <div class="lower__front"></div>
                <div class="lower__back"></div>
                <div class="lower__right"></div>
                <div class="lower__left"></div>
                <div class="lower__top"></div>
                <div class="lower__bottom"></div>
              </div>
            </div>
          </div>
          <div class="arm__right">
            <div class="shoulder">
              <div class="shoulder__front"></div>
              <div class="shoulder__back"></div>
              <div class="shoulder__right"></div>
              <div class="shoulder__left"></div>
              <div class="shoulder__top"></div>
              <div class="shoulder__bottom"></div>
            </div>
            <div class="upper">
              <div class="upper__front"></div>
              <div class="upper__back"></div>
              <div class="upper__right"></div>
              <div class="upper__left"></div>
              <div class="upper__top"></div>
              <div class="upper__bottom"></div>
            </div>
            <div class="elbow">
              <div class="lower">
                <div class="lower__front"></div>
                <div class="lower__back"></div>
                <div class="lower__right"></div>
                <div class="lower__left"></div>
                <div class="lower__top"></div>
                <div class="lower__bottom"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="neck">
          <div class="helmet">
            <div class="helmet__wall"></div>
            <div class="helmet__face helmet__front"></div>
            <div class="helmet__face helmet__back"></div>
            <div class="face helmet__face helmet__right">S</div>
            <div class="face helmet__face helmet__left">S</div>
            <div class="helmet__face helmet__top"></div>
            <div class="helmet__face helmet__bottom"></div>
          </div>
        </div>
      </div>
    </div>
    <script>
      const volumes = {
        torso: [10, 190, 60, 60, 50, 50],
        thigh: [140, 20, 25, 25, 25, 25],
        calf: [150, 10, 20, 20, 20, 20],
        foot: [0, 20, 20, 20, 60, 20],
        shoulder: [30, 30, 30, 30, 30, 30],
        upper: [110, 10, 20, 20, 20, 20],
        lower: [100, 20, 15, 15, 15, 15],
        helmet: [0, 100, 50, 50, 50, 50],
      };

      const offsets = {
        waist: 300,
        knee: -140,
        foot: -160,
        pads: 160,
        elbow: -120,
        neck: 200,
      };

      const style = document.createElement('style');
      style.innerHTML = `
      * {
        box-sizing: border-box;
        position: absolute;
        transform-style: preserve-3d;
        backface-visibility: inherit;
        font-family: fantasy;
      }
      body {
        margin: 0;
        padding: 0;
      }
      .face {
        display: flex;
        justify-content: center;
        align-items: center;
        backface-visibility: inherit;
        font-size: 40px;
        color: white;
      }
      .buttons {
        display: flex;
        flex-direction: column;
      }
      button {
        position: static;
      }
      .floor {
        left: 300px;
        top: 500px;
        perspective: 100000px;
        animation: 15s linear infinite rotate15;
      }
      .field {
        left: -100px;
        top: -150px;
        width: 200px;
        height: 300px;
        background: green;
      }
      .torso div {
        font-size: 100px;
        background: red;
      }
      .shoulder div {
        background: red;
      }
      .helmet div {
        color: red;
        background: white;
      }
      .thigh div {
        background: white;
      }
      .calf div {
        background: white;
      }
      .foot div {
        background: black;
      }
      .upper div {
        background: brown;
      }
      .lower div {
        background: brown;
      }
      .helmet__face {
        clip-path: polygon(30px 0px, ${volumes.helmet[1] - 30}px 0px,
        ${volumes.helmet[1]}px 30px,
        ${volumes.helmet[1]}px ${volumes.helmet[1] - 30}px,
        ${volumes.helmet[1] - 30}px ${volumes.helmet[1]}px,
        30px ${volumes.helmet[1]}px,
        0px ${volumes.helmet[1] - 30}px, 0px 30px, 30px 0px);
      }
      @keyframes fieldMotion {
        to {transform: translateY(-600px);}
      }
      @keyframes rotate15 {
        from {transform: rotateX(45deg)}
        to {transform: rotateX(45deg) rotateZ(360deg)}
      }
      @keyframes swing45 {
        33% {
          transform: rotateX(45deg);
        }
        66% {
          transform: rotateX(-45deg);
        }
      }
      @keyframes swing45_60 {
        33% {
          transform: rotateX(45deg);
        }
        66% {
          transform: rotateX(-60deg);
        }
      }
      @keyframes kneeSwingWalk {
        66% {
          transform: translateZ(${offsets.knee}px) rotateX(-30deg);
        }
      }
      @keyframes kneeSwingRun {
        66% {
          transform: translateZ(${offsets.knee}px) rotateX(-90deg);
        }
      }
      @keyframes elbows30 {
        to {
          transform: translateZ(${offsets.elbow}px) rotateX(30deg);
        }
      }
      @keyframes elbows90 {
        to {
          transform: translateZ(${offsets.elbow}px) rotateX(90deg);
          animation-timing-function: ease-in;
        }
      }
      `;

      const parts = Object.keys(volumes);
      const faces = ['bottom', 'top', 'left', 'right', 'front', 'back'];
      for (const part of parts) {
        for (const face of faces) {
          let index = faces.indexOf(face);
          if (index < 2) {
            style.innerHTML += `.${part}__${face} {
              left: ${-volumes[part][2]}px;
              top: ${-volumes[part][5]}px;
              width: ${volumes[part][2] + volumes[part][3]}px;
              height: ${volumes[part][4] + volumes[part][5]}px;
              transform: rotateY(${index === 1 ? 0 : 180}deg) translateZ(${
              volumes[part][index]
            }px);
            }
            `;
          } else if (index < 4) {
            style.innerHTML += `.${part}__${face} {
              left: ${
                (volumes[part][3] -
                  volumes[part][2] -
                  volumes[part][4] -
                  volumes[part][5]) /
                2
              }px;
              top: ${
                (volumes[part][4] -
                  volumes[part][5] -
                  volumes[part][1] -
                  volumes[part][0]) /
                2
              }px;
              width: ${volumes[part][4] + volumes[part][5]}px;
              height: ${volumes[part][0] + volumes[part][1]}px;
              transform: translateZ(${
                (volumes[part][1] - volumes[part][0]) / 2
              }px) rotateX(-90deg) rotateY(${
              index === 3 ? -90 : 90
            }deg) translateZ(${(volumes[part][2] + volumes[part][3]) / 2}px);
            }
            `;
          } else {
            style.innerHTML += `.${part}__${face} {
              left: ${-volumes[part][2]}px;
              top: ${
                (volumes[part][4] -
                  volumes[part][5] -
                  volumes[part][1] -
                  volumes[part][0]) /
                2
              }px;
              width: ${volumes[part][2] + volumes[part][3]}px;
              height: ${volumes[part][0] + volumes[part][1]}px;
              transform: translateZ(
              ${(volumes[part][1] - volumes[part][0]) / 2}px) 
              rotateX(-90deg) rotateY(
                ${index === 4 ? 0 : 180}deg) 
                translateZ(${(volumes[part][4] + volumes[part][5]) / 2}px);
            }
            `;
          }
        }
      }

      style.innerHTML += `
      .waist {
        transform: translateZ(${offsets.waist}px);
      }
      .leg__left {
        left: 30px;
      }
      .leg__right {
        left: -30px;
      }
      .knee {
        transform: translateZ(${offsets.knee}px);
      }
      .foot {
        transform: translateZ(${offsets.foot}px);
      }
      .pads {
        transform: translateZ(${offsets.pads}px);
      }
      .arm__left {
        left: 80px;
      }
      .arm__right {
        left: -80px;
      }
      .elbow {
        transform: translateZ(${offsets.elbow}px);
      }
      .neck {
        transform: translateZ(${offsets.neck}px);
      }
      `;
      document.head.appendChild(style);

      const animation = document.createElement('style');

      function stand() {
        animation.innerHTML = '';
      }

      function walk() {
        animation.innerHTML = `
        // .field {
        //   animation: fieldMotion 3s linear infinite;
        //   background:
        // }
      .arm__right {
        animation: 1s 0.5s infinite linear swing45;
      }
      .arm__left {
        animation: 1s infinite linear swing45;
      }
      .leg__right {
        animation: 1s infinite linear swing45;
      }
      .leg__left {
        animation: 1s 0.5s infinite linear swing45;
      }
      .knee {
        animation: 0.5s infinite linear kneeSwingWalk;
      }
      .elbow {
        animation: 0.5s forwards elbows30;
      }
      `;
      }

      function run() {
        animation.innerHTML = `
      .arm__right {
        animation: 0.5s 0.25s infinite linear swing45_60;
      }
      .arm__left {
        animation: 0.5s infinite linear swing45_60;
      }
      .leg__right {
        animation: 0.5s infinite linear swing45_60;
      }
      .leg__left {
        animation: 0.5s 0.25s infinite linear swing45_60;
      }
      .knee {
        animation: 0.25s infinite linear kneeSwingRun;
      }
      .elbow {
        animation: 0.5s forwards elbows90;
      }
      `;
      }

      document.body.appendChild(animation);
    </script>
  </body>
</html>
